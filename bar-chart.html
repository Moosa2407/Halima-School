<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ø§Ø®ØªÙŠØ§Ø± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙ…Ø«ÙŠÙ„ â€” Ø§Ø±Ø³Ù… Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø¨Ù†ÙØ³Ùƒ</title>
  <style>
    :root{
      --bg:#f8f6fb; --ink:#111827; --muted:#6b7280; --border:#e5e7eb;
      --panel:#fff; --panel2:#faf5ff; --ok:#16a34a; --bad:#dc2626;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:"Tahoma", Arial, sans-serif}
    .wrap{max-width:1100px;margin:auto;padding:18px}
    h1{margin:8px 0 4px;text-align:center}
    .subtitle{color:var(--muted);text-align:center;margin-bottom:12px}
    .status{display:flex;justify-content:space-between;align-items:center;gap:10px;background:var(--panel2);border:1px solid var(--border);padding:10px 14px;border-radius:12px}
    .chip{font-weight:700;padding:8px 12px;border-radius:10px;background:#e0e7ff}
    .chip.time{background:#fde0e0}
    .task{margin-top:16px;background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:14px;box-shadow:0 6px 18px rgba(0,0,0,.05)}
    .task h2{margin:0 0 8px;font-size:20px}
    .grid-area{display:grid;grid-template-columns: 1fr 1fr;gap:16px}
    .table{border:1px solid var(--border);border-radius:10px;overflow:hidden}
    .table header{background:#f3f4f6;padding:8px 10px;font-weight:700}
    table{width:100%;border-collapse:collapse}
    th,td{border-top:1px solid var(--border);padding:8px 10px;text-align:center}
    .canvas{border:1px dashed #cbd5e1;border-radius:12px;padding:10px;background:#fff}
    .axis{display:flex;gap:14px;align-items:flex-end;justify-content:center;min-height:240px;flex-wrap:wrap}
    .col{width:64px;display:flex;flex-direction:column-reverse;gap:2px;align-items:stretch;cursor:pointer}
    .cell{height:12px;border:1px solid #e5e7eb;background:#ffffff;border-radius:3px}
    .cell.f{background:#aac8ff;border-color:#90b4ff}
    .label{text-align:center;margin-top:6px;font-weight:700}
    .help{color:var(--muted);font-size:14px;margin:4px 0 8px}
    .controls{display:flex;gap:10px;justify-content:center;margin-top:8px}
    button{padding:10px 16px;border-radius:10px;border:1px solid #cbd5e1;background:#e5e7ff;cursor:pointer}
    button:hover{filter:brightness(0.98)}
    .note{margin-top:6px;text-align:center;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Ø§Ø±Ø³Ù… Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø¨Ù†ÙØ³Ùƒ</h1>
    <p class="subtitle">Ù„Ø¯ÙŠÙƒ 180 Ø«Ø§Ù†ÙŠØ© Ù„Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù‡Ø§Ù…. Ø¥Ø°Ø§ Ø£Ø®Ø·Ø£Øª Ø£Ùˆ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª Ø³ØªØ¹ÙˆØ¯ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©.</p>

    <div class="status">
      <div class="chip">Ø§Ù„Ù…Ù‡Ù…Ø©: <span id="taskNo">1 / â€”</span></div>
      <div class="chip">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span></div>
      <div class="chip time">â° Ø§Ù„ÙˆÙ‚Øª: <span id="time">180</span> Ø«Ø§Ù†ÙŠØ©</div>
    </div>

    <section id="task" class="task">
      <h2 id="taskTitle">â€”</h2>
      <div class="grid-area">
        <!-- Ø§Ù„Ø¬Ø¯ÙˆÙ„ -->
        <div class="table">
          <header id="tableTitle">Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</header>
          <table id="dataTable"><thead><tr><th>Ø§Ù„ØµÙ†Ù</th><th>Ø§Ù„Ù‚ÙŠÙ…Ø©</th></tr></thead><tbody></tbody></table>
        </div>

        <!-- Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø±Ø³Ù… -->
        <div>
          <div class="canvas">
            <div class="help" id="scaleHelp">Ø§Ø¶ØºØ· Ø¨Ø§Ù„Ø²Ø± Ø§Ù„Ø£ÙŠØ³Ø± Ù„Ø²ÙŠØ§Ø¯Ø© Ø®Ø§Ù†Ø©ØŒ ÙˆØ§Ù„ÙŠÙ…ÙŠÙ† Ù„Ù„Ù†Ù‚ØµØ§Ù†.</div>
            <div id="axis" class="axis"></div>
          </div>
          <div class="controls">
            <button id="checkBtn">ØªØ­Ù‚Ù‘Ù‚</button>
          </div>
          <p class="note">ÙŠØ³Ø§Ø±: Ø²ÙŠØ§Ø¯Ø© Ø®Ø§Ù†Ø© â€¢ ÙŠÙ…ÙŠÙ†: Ø¥Ù†Ù‚Ø§Øµ Ø®Ø§Ù†Ø©</p>
        </div>
      </div>
    </section>
  </div>

<script>
/* =======================
   1) Ø¨Ù†Ùƒ Ø§Ù„Ù…Ù‡Ø§Ù… â€” ÙƒØ¨ÙŠØ± ÙˆÙ…ØªÙ†ÙˆØ¹ (Ø¨Ø¯ÙˆÙ† ØªÙƒØ±Ø§Ø±)
   scale = Ù‚ÙŠÙ…Ø© ÙƒÙ„ Ø®Ø§Ù†Ø© Ø±Ø£Ø³ÙŠØ©
   maxRows = Ø¹Ø¯Ø¯ Ø§Ù„Ø®Ø§Ù†Ø§Øª Ø§Ù„Ø±Ø£Ø³ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø©
   ======================= */

// Ù…Ø«Ù„ Ø§Ù„Ù…Ù„Ø²Ù…Ø© (1): Ù‡ÙˆØ§ÙŠØ§Øª
const T1 = {
  title: 'Ø§Ù„Ø³Ø¤Ø§Ù„ (1): Ù…Ø«Ù‘ÙÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ù‡ÙˆØ§ÙŠØ§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ Ø¨Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©',
  tableTitle: 'Ø§Ù„Ù‡ÙˆØ§ÙŠØ§Øª Ø§Ù„Ù…ÙØ¶Ù„Ø©',
  scaleText: 'Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø±Ø³Ù…: ÙƒÙ„ Ø®Ø§Ù†Ø© = 5 Ø·Ù„Ø§Ø¨',
  scale: 5, maxRows: 12,
  data: { 'ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù…':30, 'ÙƒØ±Ø© Ø§Ù„Ø³Ù„Ø©':20, 'Ø§Ù„Ø·Ø§Ø¦Ø±Ø©':25, 'Ø§Ù„ØªÙ†Ø³':15 }
};

// Ù…Ø«Ù„ Ø§Ù„Ù…Ù„Ø²Ù…Ø© (2): Ø§Ù„Ù…Ø¹Ø§Ø¯Ù†
const T2 = {
  title: 'Ø§Ù„Ø³Ø¤Ø§Ù„ (2): Ù…Ø«Ù‘ÙÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¹Ø§Ø¯Ù† Ø¨Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© ÙˆÙ‚Ø§Ø±ÙÙ† Ø¨ÙŠÙ†Ù‡Ø§',
  tableTitle: 'Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø®Ø§Ù… ÙÙŠ Ù…Ù†Ø¬Ù…',
  scaleText: 'Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø±Ø³Ù…: ÙƒÙ„ Ø®Ø§Ù†Ø© = 10 ÙˆØ­Ø¯Ø§Øª',
  scale: 10, maxRows: 16,
  data: { 'Ø°Ù‡Ø¨':140, 'ÙØ¶Ø©':120, 'Ø­Ø¯ÙŠØ¯':110, 'Ø£Ù„Ù…Ù†ÙŠÙˆÙ…':100, 'Ù†Ø­Ø§Ø³':70, 'Ø²Ù†Ùƒ':60 }
};

// Ù…Ø«Ù„ Ø§Ù„Ù…Ù„Ø²Ù…Ø© (3): Ø§Ù„Ø­Ø±Ø§Ø±Ø© Ø´Ù‡Ø±ÙŠÙ‹Ø§
const T3 = {
  title: 'Ø§Ù„Ø³Ø¤Ø§Ù„ (3): Ù…Ø«Ù‘ÙÙ„ Ù…ØªÙˆØ³Ø· Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±Ø© Ø¨Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©',
  tableTitle: 'Ù…ØªÙˆØ³Ø· Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Â°Ù…)',
  scaleText: 'Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø±Ø³Ù…: ÙƒÙ„ Ø®Ø§Ù†Ø© = 1Â°Ù…',
  scale: 1, maxRows: 50,
  data: { 'ÙŠÙ†Ø§ÙŠØ±':22,'ÙØ¨Ø±Ø§ÙŠØ±':23,'Ù…Ø§Ø±Ø³':25,'Ø£Ø¨Ø±ÙŠÙ„':28,'Ù…Ø§ÙŠÙˆ':30,'ÙŠÙˆÙ†ÙŠÙˆ':35,'ÙŠÙˆÙ„ÙŠÙˆ':44,'Ø£ØºØ³Ø·Ø³':43,'Ø³Ø¨ØªÙ…Ø¨Ø±':39,'Ø£ÙƒØªÙˆØ¨Ø±':33,'Ù†ÙˆÙÙ…Ø¨Ø±':28,'Ø¯ÙŠØ³Ù…Ø¨Ø±':22 }
};

// Ù…Ù‡Ø§Ù… Ø¥Ø¶Ø§ÙÙŠØ© (Ù„Ø§ ØªÙƒØ±Ø§Ø±)
const T4 = {
  title: 'Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„Ø¹ØµØ§Ø¦Ø± Ø®Ù„Ø§Ù„ Ø£Ø³Ø¨ÙˆØ¹',
  tableTitle: 'Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„Ø¹ØµØ§Ø¦Ø± (Ù„ØªØ±)',
  scaleText: 'Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø±Ø³Ù…: ÙƒÙ„ Ø®Ø§Ù†Ø© = 5 Ù„ØªØ±Ø§Øª',
  scale: 5, maxRows: 12,
  data: { 'Ø¨Ø±ØªÙ‚Ø§Ù„':40, 'ØªÙØ§Ø­':25, 'Ù…Ø§Ù†Ø¬Ùˆ':30, 'ÙØ±Ø§ÙˆÙ„Ø©':15 }
};
const T5 = {
  title: 'Ù†ØªØ§Ø¦Ø¬ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª',
  tableTitle: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨ ÙÙŠ ÙƒÙ„ Ù…Ø³ØªÙˆÙ‰',
  scaleText: 'Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø±Ø³Ù…: ÙƒÙ„ Ø®Ø§Ù†Ø© = 2 Ø·Ù„Ø§Ø¨',
  scale: 2, maxRows: 12,
  data: { 'Ù…Ù…ØªØ§Ø²':10, 'Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§':14, 'Ø¬ÙŠØ¯':8, 'Ù…Ù‚Ø¨ÙˆÙ„':6 }
};
const T6 = {
  title: 'Ù…Ø¨ÙŠØ¹Ø§Øª Ù…ØªØ¬Ø± Ø§Ù„Ø£Ø¯ÙˆØ§Øª',
  tableTitle: 'Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©',
  scaleText: 'Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø±Ø³Ù…: ÙƒÙ„ Ø®Ø§Ù†Ø© = 5 Ù‚Ø·Ø¹',
  scale: 5, maxRows: 12,
  data: { 'Ø£Ù‚Ù„Ø§Ù…':45, 'Ø¯ÙØ§ØªØ±':30, 'Ù…Ø³Ø§Ø·Ø±':25, 'Ø­Ù‚Ø§Ø¦Ø¨':15 }
};
const T7 = {
  title: 'Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª Ø§Ù„Ø£Ù„ÙŠÙØ© Ù„Ø¯Ù‰ Ø§Ù„Ø·Ù„Ø§Ø¨',
  tableTitle: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨',
  scaleText: 'Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø±Ø³Ù…: ÙƒÙ„ Ø®Ø§Ù†Ø© = 1 Ø·Ø§Ù„Ø¨',
  scale: 1, maxRows: 20,
  data: { 'Ù‚Ø·Ø·':12, 'Ø·ÙŠÙˆØ±':9, 'Ø£Ø³Ù…Ø§Ùƒ':7, 'Ø£Ø±Ø§Ù†Ø¨':5 }
};
const T8 = {
  title: 'Ø·Ø±Ù‚ Ø§Ù„Ø°Ù‡Ø§Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©',
  tableTitle: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨',
  scaleText: 'Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø±Ø³Ù…: ÙƒÙ„ Ø®Ø§Ù†Ø© = 2 Ø·Ù„Ø§Ø¨',
  scale: 2, maxRows: 15,
  data: { 'Ø­Ø§ÙÙ„Ø©':18, 'Ø³ÙŠØ±Ù‹Ø§':10, 'Ø³ÙŠØ§Ø±Ø©':14, 'Ø¯Ø±Ø§Ø¬Ø©':6 }
};
const T9 = {
  title: 'Ø­ØµØµ Ø§Ù„ÙÙˆØ§ÙƒÙ‡ Ø§Ù„Ù…ÙØ¶Ù„Ø©',
  tableTitle: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø£ØµÙˆØ§Øª',
  scaleText: 'Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø±Ø³Ù…: ÙƒÙ„ Ø®Ø§Ù†Ø© = 1 ØµÙˆØª',
  scale: 1, maxRows: 20,
  data: { 'ØªÙØ§Ø­':9, 'Ù…ÙˆØ²':12, 'Ø¹Ù†Ø¨':7, 'ÙØ±Ø§ÙˆÙ„Ø©':11 }
};
const T10 = {
  title: 'Ù‚Ø±Ø§Ø¡Ø§Øª Ù‡Ø·ÙˆÙ„ Ø§Ù„Ø£Ù…Ø·Ø§Ø± (Ù…Ù…)',
  tableTitle: 'Ø£Ø±Ø¨Ø¹Ø© Ø£Ø´Ù‡Ø± Ù…Ø®ØªØ§Ø±Ø©',
  scaleText: 'Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø±Ø³Ù…: ÙƒÙ„ Ø®Ø§Ù†Ø© = 5 Ù…Ù…',
  scale: 5, maxRows: 16,
  data: { 'ÙŠÙ†Ø§ÙŠØ±':30, 'Ø£Ø¨Ø±ÙŠÙ„':45, 'ÙŠÙˆÙ„ÙŠÙˆ':20, 'Ø£ÙƒØªÙˆØ¨Ø±':35 }
};

// Ø¨Ù†Ùƒ ÙƒØ§Ù…Ù„
const POOL = [T1,T2,T3,T4,T5,T6,T7,T8,T9,T10];

// Ù†Ø®ØªØ§Ø± Ø¹Ø´ÙˆØ§Ø¦ÙŠÙ‹Ø§ 8 Ù…Ù‡Ø§Ù… Ø¨Ø¯ÙˆÙ† ØªÙƒØ±Ø§Ø±
function shuffle(a){ return a.sort(()=>Math.random()-0.5); }
const TASKS = shuffle([...POOL]).slice(0, 8);

/* =======================
   2) Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
   ======================= */
const taskNoEl = document.getElementById('taskNo');
const scoreEl = document.getElementById('score');
const timeEl = document.getElementById('time');
const taskTitleEl = document.getElementById('taskTitle');
const tableTitleEl = document.getElementById('tableTitle');
const tbodyEl = document.querySelector('#dataTable tbody');
const axisEl = document.getElementById('axis');
const scaleHelpEl = document.getElementById('scaleHelp');
const checkBtn = document.getElementById('checkBtn');

/* =======================
   3) Ù…Ù†Ø·Ù‚ Ø§Ù„Ø±Ø³Ù… ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ…
   ======================= */
let idx = 0, score = 0, timeLeft = 180, timer = null;
let current = null;
const drawn = new Map(); // label -> rows filled

function startTimer(){
  clearInterval(timer);
  timer = setInterval(()=>{
    timeLeft--; timeEl.textContent = timeLeft;
    if(timeLeft<=0){ fail('Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª!'); }
  },1000);
}

function loadTask(i){
  current = TASKS[i];
  taskNoEl.textContent = `${i+1} / ${TASKS.length}`;
  taskTitleEl.textContent = current.title;
  tableTitleEl.textContent = current.tableTitle;
  scaleHelpEl.textContent = current.scaleText + ' â€” (Ù†Ù‚Ø±Ø© ÙŠØ³Ø§Ø± ØªØ²ÙŠØ¯ØŒ ÙŠÙ…ÙŠÙ† ØªÙ†Ù‚Øµ)';

  // Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  tbodyEl.innerHTML = '';
  Object.entries(current.data).forEach(([k,v])=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${k}</td><td>${v}</td>`;
    tbodyEl.appendChild(tr);
  });

  // Ø´Ø¨ÙƒØ© Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©
  axisEl.innerHTML = '';
  drawn.clear();
  for(const label of Object.keys(current.data)){
    const col = document.createElement('div');
    col.className = 'col';
    col.title = 'ÙŠØ³Ø§Ø±: +1 Ø®Ø§Ù†Ø© â€¢ ÙŠÙ…ÙŠÙ†: -1 Ø®Ø§Ù†Ø©';
    // Ø®Ù„Ø§ÙŠØ§
    for(let r=0;r<current.maxRows;r++){
      const cell = document.createElement('div');
      cell.className = 'cell';
      col.appendChild(cell);
    }
    // Ø§Ù„ØªÙØ§Ø¹Ù„
    let height = 0;
    drawn.set(label, height);
    const setHeight = (h)=>{
      height = Math.max(0, Math.min(current.maxRows, h));
      drawn.set(label, height);
      const cells = [...col.children];
      cells.forEach(c=>c.classList.remove('f'));
      for(let i=0;i<height;i++){ cells[i].classList.add('f'); }
    };
    col.addEventListener('click', (e)=>{ e.preventDefault(); setHeight(height+1); });
    col.addEventListener('contextmenu', (e)=>{ e.preventDefault(); setHeight(height-1); });

    // Ù„Ø§ÙØªØ© Ø§Ù„Ø§Ø³Ù…
    const wrap = document.createElement('div');
    wrap.appendChild(col);
    const lab = document.createElement('div');
    lab.className = 'label';
    lab.textContent = label;
    wrap.appendChild(lab);
    axisEl.appendChild(wrap);
  }
}

function check(){
  // Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø±Ø³ÙˆÙ…Ø© = Ø¹Ø¯Ø¯ Ø§Ù„Ø®Ø§Ù†Ø§Øª Ã— scale
  for(const [label,value] of Object.entries(current.data)){
    const rows = drawn.get(label)||0;
    const drawnValue = rows * current.scale;
    if(drawnValue !== value){
      fail(`Ø¥Ø¬Ø§Ø¨Ø© ØºÙŠØ± ØµØ­ÙŠØ­Ø© ÙÙŠ "${label}". Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø±Ø³ÙˆÙ…Ø© = ${drawnValue} ÙˆØ§Ù„ØµØ­ÙŠØ­Ø© = ${value}.`);
      return;
    }
  }
  // ØµØ­ÙŠØ­ â†’ Ø§Ù„ØªØ§Ù„ÙŠ
  score++; scoreEl.textContent = score;
  if(idx+1 >= TASKS.length){
    alert('Ø£Ø­Ø³Ù†Øª! Ø£ÙƒÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­ ğŸ‘');
    window.location.href = 'index.html';
  }else{
    idx++; loadTask(idx);
  }
}

function fail(msg){
  clearInterval(timer);
  alert(msg + ' Ø³Ù†Ø¹ÙˆØ¯ Ø§Ù„Ø¢Ù† Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©.');
  window.location.href = 'index.html';
}

/* =======================
   4) ØªØ´ØºÙŠÙ„
   ======================= */
loadTask(idx);
startTimer();
checkBtn.addEventListener('click', check);
</script>
</body>
</html>
